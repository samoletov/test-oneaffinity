import { Injectable } from '@angular/core';
import { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';

import { Observable, of } from 'rxjs';
import { Page } from './model/page';
import * as _ from 'lodash';
import { environment } from '../environments/environment';

@Injectable({
  providedIn: 'root'
})
export class ImageService {

  private imagesUrl = environment.backend + '/images';

  constructor(private http: HttpClient) { }

  getImagesPage(query: string, page: number): Observable<Page> {
    let params = new HttpParams({ fromObject: {
      query,
      page: String(page),
    } });
    return this.http.get<Page>(this.imagesUrl, {params});

    // { "photos": { "page": 1, "pages": "17158", "perpage": 5, "total": "85789",
    // "photo": [
    //   { "id": "48102326743", "owner": "165283754@N08", "secret": "b64c92a0b9", "server": "65535", "farm": 66, "title": "فلم Johnny English 2003", "ispublic": 1, "isfriend": 0, "isfamily": 0, "url_sq": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_s.jpg", "height_sq": 75, "width_sq": 75, "url_t": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_t.jpg", "height_t": 62, "width_t": 100, "url_s": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_m.jpg", "height_s": "148", "width_s": "240", "url_q": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_q.jpg", "height_q": "150", "width_q": "150", "url_m": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9.jpg", "height_m": "309", "width_m": "500", "url_n": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_n.jpg", "height_n": "198", "width_n": "320", "url_z": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_z.jpg", "height_z": "395", "width_z": "640", "url_c": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_c.jpg", "height_c": "494", "width_c": "800", "url_l": "https:\/\/live.staticflickr.com\/65535\/48102326743_b64c92a0b9_b.jpg", "height_l": "494", "width_l": "800", "url_o": "https:\/\/live.staticflickr.com\/65535\/48102326743_32aa42dea5_o.png", "height_o": "494", "width_o": "800" },
    //   { "id": "48101239991", "owner": "168855748@N03", "secret": "af4ed9f788", "server": "65535", "farm": 66, "title": "Johnny Gill Gets Romantic With Tiffany Haddish In “Soul Of A Woman” Visual", "ispublic": 1, "isfriend": 0, "isfamily": 0, "url_sq": "https:\/\/live.staticflickr.com\/65535\/48101239991_af4ed9f788_s.jpg", "height_sq": 75, "width_sq": 75, "url_t": "https:\/\/live.staticflickr.com\/65535\/48101239991_af4ed9f788_t.jpg", "height_t": 66, "width_t": 100, "url_s": "https:\/\/live.staticflickr.com\/65535\/48101239991_af4ed9f788_m.jpg", "height_s": "159", "width_s": "240", "url_q": "https:\/\/live.staticflickr.com\/65535\/48101239991_af4ed9f788_q.jpg", "height_q": "150", "width_q": "150", "url_m": "https:\/\/live.staticflickr.com\/65535\/48101239991_af4ed9f788.jpg", "height_m": "332", "width_m": "500", "url_n": "https:\/\/live.staticflickr.com\/65535\/48101239991_af4ed9f788_n.jpg", "height_n": "213", "width_n": "320", "url_z": "https:\/\/live.staticflickr.com\/65535\/48101239991_af4ed9f788_z.jpg", "height_z": "412", "width_z": "620", "url_o": "https:\/\/live.staticflickr.com\/65535\/48101239991_5571b1c5b8_o.jpg", "height_o": "412", "width_o": "620" },
    //   { "id": "48092293236", "owner": "93421949@N06", "secret": "683cd3ed36", "server": "65535", "farm": 66, "title": "Great Horned Owl (Juv.)", "ispublic": 1, "isfriend": 0, "isfamily": 0, "url_sq": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_s.jpg", "height_sq": 75, "width_sq": 75, "url_t": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_t.jpg", "height_t": 67, "width_t": 100, "url_s": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_m.jpg", "height_s": "160", "width_s": "240", "url_q": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_q.jpg", "height_q": "150", "width_q": "150", "url_m": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36.jpg", "height_m": "333", "width_m": "500", "url_n": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_n.jpg", "height_n": "213", "width_n": "320", "url_z": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_z.jpg", "height_z": "427", "width_z": "640", "url_c": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_c.jpg", "height_c": "534", "width_c": "800", "url_l": "https:\/\/live.staticflickr.com\/65535\/48092293236_683cd3ed36_b.jpg", "height_l": "683", "width_l": "1024" },
    //   { "id": "48092332073", "owner": "93421949@N06", "secret": "c7cb03ae3f", "server": "65535", "farm": 66, "title": "Great Horned Owl (Juv.)", "ispublic": 1, "isfriend": 0, "isfamily": 0, "url_sq": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_s.jpg", "height_sq": 75, "width_sq": 75, "url_t": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_t.jpg", "height_t": 67, "width_t": 100, "url_s": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_m.jpg", "height_s": "160", "width_s": "240", "url_q": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_q.jpg", "height_q": "150", "width_q": "150", "url_m": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f.jpg", "height_m": "333", "width_m": "500", "url_n": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_n.jpg", "height_n": "213", "width_n": "320", "url_z": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_z.jpg", "height_z": "427", "width_z": "640", "url_c": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_c.jpg", "height_c": "534", "width_c": "800", "url_l": "https:\/\/live.staticflickr.com\/65535\/48092332073_c7cb03ae3f_b.jpg", "height_l": "683", "width_l": "1024" },
    //   { "id": "48092634621", "owner": "70364571@N05", "secret": "ffc7306d7e", "server": "65535", "farm": 66, "title": "Fokker Spin III replica in Lelystad", "ispublic": 1, "isfriend": 0, "isfamily": 0, "url_sq": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_s.jpg", "height_sq": 75, "width_sq": 75, "url_t": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_t.jpg", "height_t": 56, "width_t": 100, "url_s": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_m.jpg", "height_s": "135", "width_s": "240", "url_q": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_q.jpg", "height_q": "150", "width_q": "150", "url_m": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e.jpg", "height_m": "281", "width_m": "500", "url_n": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_n.jpg", "height_n": "180", "width_n": "320", "url_z": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_z.jpg", "height_z": "360", "width_z": "640", "url_c": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_c.jpg", "height_c": "450", "width_c": "800", "url_l": "https:\/\/live.staticflickr.com\/65535\/48092634621_ffc7306d7e_b.jpg", "height_l": "576", "width_l": "1024", "url_o": "https:\/\/live.staticflickr.com\/65535\/48092634621_09e0b3dba7_o.jpg", "height_o": "2588", "width_o": "4600" }
    // ] }, "stat": "ok" }

  }
}
